<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Postgres Notes | Barack&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="CREATE USER 12CREATE USER root WITH PASSWORD &#39;root&#39;;ALTER USER root WITH SUPERUSER;  PARTITION 123456789101112131415161718192021222324&#x2F;*创建分区表*&#x2F;create table test(n int) partition by range(n);create">
<meta property="og:type" content="article">
<meta property="og:title" content="Postgres Notes">
<meta property="og:url" content="http://yoursite.com/2021/01/25/Postgres-Notes/index.html">
<meta property="og:site_name" content="Barack&#39;s Blog">
<meta property="og:description" content="CREATE USER 12CREATE USER root WITH PASSWORD &#39;root&#39;;ALTER USER root WITH SUPERUSER;  PARTITION 123456789101112131415161718192021222324&#x2F;*创建分区表*&#x2F;create table test(n int) partition by range(n);create">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2021/01/25/Postgres-Notes/Postgres-Maintainence.jpg">
<meta property="og:image" content="http://yoursite.com/2021/01/25/Postgres-Notes/Postgres-Security.jpg">
<meta property="og:image" content="http://yoursite.com/2021/01/25/Postgres-Notes/Postgres-Monitor.jpg">
<meta property="og:image" content="http://yoursite.com/2021/01/25/Postgres-Notes/Postgres-Backup.jpg">
<meta property="article:published_time" content="2021-01-25T13:25:54.000Z">
<meta property="article:modified_time" content="2021-01-25T17:26:06.403Z">
<meta property="article:author" content="Barack Chen">
<meta property="article:tag" content="PostgreSQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2021/01/25/Postgres-Notes/Postgres-Maintainence.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Barack&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Barack&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Enjoy Coding</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Postgres-Notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/25/Postgres-Notes/" class="article-date">
  <time datetime="2021-01-25T13:25:54.000Z" itemprop="datePublished">2021-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Postgres Notes
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/2021/01/25/Postgres-Notes/Postgres-Maintainence.jpg" alt="Postgres-Maintainence" title="Postgres-Maintainence"></p>
<p><img src="/2021/01/25/Postgres-Notes/Postgres-Security.jpg" alt="Postgres-Security" title="Postgres-Maintainence"></p>
<p><img src="/2021/01/25/Postgres-Notes/Postgres-Monitor.jpg" alt="Postgres-Monitor" title="Postgres-Maintainence"></p>
<p><img src="/2021/01/25/Postgres-Notes/Postgres-Backup.jpg" alt="Postgres-Backup" title="Postgres-Maintainence"></p>
<p>CREATE USER</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> root <span class="keyword">WITH</span> <span class="keyword">PASSWORD</span> <span class="string">'root'</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> root <span class="keyword">WITH</span> <span class="keyword">SUPERUSER</span>;</span><br></pre></td></tr></table></figure>

<p>PARTITION</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建分区表*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test(n <span class="type">int</span>) <span class="keyword">partition by range</span>(n);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_1 <span class="keyword">partition</span> <span class="keyword">of</span> test <span class="keyword">for</span> <span class="keyword">values</span> <span class="keyword">from</span> (<span class="keyword">MINVALUE</span>) to (<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_2 <span class="keyword">partition</span> <span class="keyword">of</span> test <span class="keyword">for</span> <span class="keyword">values</span> <span class="keyword">from</span> (<span class="number">10</span>) <span class="keyword">to</span> (<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_3 <span class="keyword">partition</span> <span class="keyword">of</span> test <span class="keyword">for</span> <span class="keyword">values</span> <span class="keyword">from</span> (<span class="number">100</span>) <span class="keyword">to</span> (<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test <span class="keyword">values</span> (<span class="number">100000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*hash 表分区*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> htable (c1 <span class="type">bigint</span>, c2 <span class="type">VARCHAR</span>(<span class="number">10</span>)) <span class="keyword">PARTITION BY HASH</span>(c1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> htable_p0 <span class="keyword">PARTITION</span> <span class="keyword">OF</span> htable <span class="keyword">FOR</span> <span class="keyword">VALUES</span> <span class="keyword">WITH</span> (MODULUS <span class="number">4</span>, REMAINDER <span class="number">0</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> htable_p1 <span class="keyword">PARTITION</span> <span class="keyword">OF</span> htable <span class="keyword">FOR</span> <span class="keyword">VALUES</span> <span class="keyword">WITH</span> (MODULUS <span class="number">4</span>, REMAINDER <span class="number">1</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> htable_p2 <span class="keyword">PARTITION</span> <span class="keyword">OF</span> htable <span class="keyword">FOR</span> <span class="keyword">VALUES</span> <span class="keyword">WITH</span> (MODULUS <span class="number">4</span>, REMAINDER <span class="number">2</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> htable_p3 <span class="keyword">PARTITION</span> <span class="keyword">OF</span> htable <span class="keyword">FOR</span> <span class="keyword">VALUES</span> <span class="keyword">WITH</span> (MODULUS <span class="number">4</span>, REMAINDER <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">（hash(<span class="keyword">value</span>) % nparts+nparts%nparts）</span><br></pre></td></tr></table></figure>

<p>VACUUM</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t(n <span class="type">numeric</span>)</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> t_n <span class="keyword">on</span> t(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t <span class="keyword">SELECT</span> random() <span class="keyword">FROM</span> generate_series(<span class="number">1</span>,<span class="number">100000</span>);</span><br><span class="line"><span class="comment">/*更新统计信息*/</span></span><br><span class="line"><span class="keyword">analyze</span> t</span><br><span class="line"><span class="comment">/*查看表和索引大小*/</span></span><br><span class="line"><span class="keyword">select</span> pg_relation_size(<span class="string">'t'</span>)</span><br><span class="line"><span class="keyword">select</span> pg_size_pretty(pg_relation_size(<span class="string">'t'</span>)); </span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> relname,relfilenode, relpages <span class="keyword">FROM</span> pg_class </span><br><span class="line"><span class="keyword">WHERE</span> relname = <span class="string">'t'</span> <span class="keyword">or</span> relname = <span class="string">'t_n'</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> pg_stat_all_tables <span class="keyword">where</span> relname = <span class="string">'t'</span>;</span><br><span class="line"><span class="keyword">select</span> relname,last_vacuum,n_live_tup,n_dead_tup <span class="keyword">from</span> pg_stat_all_tables</span><br><span class="line"><span class="keyword">where</span> relname = <span class="string">'t'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> t <span class="keyword">SET</span> n=n <span class="keyword">WHERE</span> n &lt; <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">VACUUM</span> <span class="keyword">FULL</span> t</span><br><span class="line"></span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> testtable </span><br><span class="line">(</span><br><span class="line">  i <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*批量插入数据函数*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR REPLACE</span> <span class="keyword">FUNCTION</span> test_insert() <span class="keyword">returns</span> <span class="type">integer</span> <span class="keyword">AS</span> $$</span><br><span class="line"><span class="pgsql"><span class="keyword">DECLARE</span></span></span><br><span class="line"><span class="pgsql">min <span class="type">integer</span>;</span></span><br><span class="line"><span class="pgsql">max <span class="type">integer</span>;</span></span><br><span class="line"><span class="pgsql"><span class="keyword">BEGIN</span></span></span><br><span class="line"><span class="pgsql"><span class="keyword">SELECT</span> COUNT(*) <span class="keyword">INTO</span> min <span class="keyword">from</span> testtable;</span></span><br><span class="line"><span class="lua"><span class="built_in">max</span> := <span class="built_in">min</span> + <span class="number">100000</span>;</span></span><br><span class="line"><span class="lua">FOR i IN <span class="built_in">min</span>..<span class="built_in">max</span> LOOP</span></span><br><span class="line"><span class="pgsql"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> testtable <span class="keyword">VALUES</span>(i);</span></span><br><span class="line"><span class="pgsql"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span></span><br><span class="line"><span class="pgsql"><span class="keyword">RETURN</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="pgsql"><span class="keyword">END</span>;</span></span><br><span class="line"><span class="ruby">$$</span> <span class="keyword">LANGUAGE</span> plpgsql;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> test_insert()</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> COUNT(*) <span class="keyword">FROM</span> testtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ANALYZE</span> testtable</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查看表的大小*/</span></span><br><span class="line"><span class="keyword">SELECT</span> relname,relfilenode, relpages <span class="keyword">FROM</span> pg_class <span class="keyword">WHERE</span></span><br><span class="line">relname = <span class="string">'testtable'</span> <span class="keyword">or</span> relname = <span class="string">'testtable_idx'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> testtable <span class="keyword">WHERE</span> i &lt; <span class="number">30000</span></span><br><span class="line"><span class="comment">/*更新表的统计信息*/</span></span><br><span class="line"><span class="keyword">VACUUM</span> <span class="keyword">ANALYZE</span> testtable</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> relname,relfilenode, relpages <span class="keyword">FROM</span> pg_class <span class="keyword">WHERE</span> relname</span><br><span class="line">= <span class="string">'testtable'</span> <span class="keyword">or</span> relname = <span class="string">'testtable_idx'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> test_insert()</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> count(*) <span class="keyword">from</span> testtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ANALYZE</span> testtable</span><br></pre></td></tr></table></figure>

<p>Create Index</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test1 (id <span class="type">int</span>,content <span class="type">varchar</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> test1_id_index <span class="keyword">ON</span> test1 (id);?</span><br><span class="line"><span class="comment">/*表达式索引*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> test1_id_index1 <span class="keyword">ON</span> test1(id) <span class="keyword">where</span> id &gt;<span class="number">1</span>;</span><br><span class="line"><span class="comment">/*Cluster*/</span></span><br><span class="line"><span class="keyword">CLUSTER</span> t1</span><br><span class="line"></span><br><span class="line"><span class="keyword">CLUSTER</span> aix <span class="keyword">ON</span> t1</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> <span class="type">name</span> <span class="keyword">ON</span> <span class="keyword">table</span> <span class="keyword">USING</span> hash (<span class="keyword">column</span>);</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> test1 <span class="keyword">where</span> id &gt; <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ANALYZE</span> test1</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> points(p <span class="type">point</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> points(p) <span class="keyword">values</span></span><br><span class="line">(<span class="type">point</span> <span class="string">'(1,1)'</span>), (<span class="type">point</span> <span class="string">'(3,2)'</span>), (<span class="type">point</span> <span class="string">'(6,3)'</span>),</span><br><span class="line">(<span class="type">point</span> <span class="string">'(5,5)'</span>), (<span class="type">point</span> <span class="string">'(7,8)'</span>), (<span class="type">point</span> <span class="string">'(8,6)'</span>);</span><br><span class="line">  </span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">index</span> <span class="keyword">on</span> points <span class="keyword">using</span> gist(p);</span><br><span class="line">  </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> points</span><br><span class="line">  </span><br><span class="line"><span class="keyword">set</span> enable_seqscan = <span class="keyword">off</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">explain</span>(<span class="keyword">costs</span> <span class="keyword">off</span>) </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> points <span class="keyword">where</span> p &lt;@ <span class="type">box</span> <span class="string">'(2,1),(7,4)'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">explain</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> points <span class="keyword">order</span> <span class="keyword">by</span> p &lt;-&gt; <span class="type">point</span> <span class="string">'(4,7)'</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> generate_series(<span class="number">1</span>,<span class="number">3000000</span>),clock_timestamp()::<span class="type">timestamp</span>(<span class="number">0</span>)</span><br><span class="line"><span class="type">without time zone</span>,<span class="string">'get u'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="built_in">public</span>.tbl_indexA</span><br><span class="line">(</span><br><span class="line">    a <span class="type">int</span>,</span><br><span class="line">    b <span class="type">timestamp</span> <span class="type">without time zone</span>,</span><br><span class="line">    c <span class="type">varchar</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="built_in">public</span>.tbl_indexa(a,b,c)</span><br><span class="line"><span class="keyword">select</span> generate_series(<span class="number">1</span>,<span class="number">3000000</span>),clock_timestamp()::<span class="type">timestamp</span>(<span class="number">0</span>)</span><br><span class="line"><span class="type">without time zone</span>,<span class="string">'sfs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> pg_trgm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> btree_gist;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_gistdemo <span class="keyword">on</span> tbl_indexa <span class="keyword">using</span> gist(c);</span><br></pre></td></tr></table></figure>

<p>Reindex</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">reindex</span> <span class="keyword">index</span> index_name;</span><br><span class="line"><span class="keyword">reindex</span> <span class="keyword">table</span> <span class="built_in">table_name</span>;</span><br><span class="line"><span class="keyword">reindex</span> <span class="keyword">database</span> db_name</span><br><span class="line"></span><br><span class="line"><span class="comment">/*查看索引使用情况*/</span></span><br><span class="line"><span class="keyword">select</span> relname, indexrelname, idx_scan, idx_tup_read, idx_tup_fetch </span><br><span class="line"><span class="keyword">from</span> pg_stat_user_indexes <span class="keyword">where</span> relname = <span class="string">'test1'</span> <span class="keyword">order</span> <span class="keyword">by</span> idx_scan <span class="keyword">asc</span>, idx_tup_read <span class="keyword">asc</span>, idx_tup_fetch <span class="keyword">asc</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> relname, indexrelname, idx_scan, idx_tup_read, idx_tup_fetch </span><br><span class="line"><span class="keyword">from</span> pg_stat_user_indexes <span class="keyword">order</span> <span class="keyword">by</span> idx_scan <span class="keyword">asc</span>, idx_tup_read <span class="keyword">asc</span>, </span><br><span class="line">idx_tup_fetch <span class="keyword">asc</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 此时已经在该表中插入了大约 <span class="number">6</span> 万条数据，下面的 <span class="keyword">SQL</span> 语句将查询该索引所</span><br><span class="line">占用的磁盘空间。</span><br><span class="line">postgres=# <span class="keyword">SELECT</span> relname, pg_relation_size(<span class="type">oid</span>)/<span class="number">1024</span> || <span class="string">'K'</span> <span class="keyword">AS</span> size <span class="keyword">FROM</span> pg</span><br><span class="line">_class <span class="keyword">WHERE</span> relkind=<span class="string">'i'</span> <span class="keyword">AND</span> relname = <span class="string">'testtable_idx'</span>;</span><br><span class="line">relname | size</span><br><span class="line"><span class="comment">----------------+------</span></span><br><span class="line">testtable_idx | <span class="number">1240</span>K</span><br><span class="line">中国PG分会(<span class="number">1</span> <span class="keyword">row</span>)</span><br><span class="line"><span class="number">2.</span> 删除数据表中大多数的数据。</span><br><span class="line">postgres=# <span class="keyword">DELETE</span> <span class="keyword">FROM</span> testtable <span class="keyword">WHERE</span> i &gt; <span class="number">20000</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="number">50006</span></span><br><span class="line"><span class="number">3.</span> 分析一个该表，以便于后面的 <span class="keyword">SQL</span> 语句继续查看该索引占用的空间。</span><br><span class="line">postgres=# <span class="keyword">ANALYZE</span> testtable;</span><br><span class="line"><span class="keyword">ANALYZE</span></span><br><span class="line"><span class="number">4.</span> 从该查询结果可以看出，该索引所占用的空间并未减少，而是和之前的完全</span><br><span class="line">一样。</span><br><span class="line">postgres=# <span class="keyword">SELECT</span> pg_relation_size(<span class="string">'testtable_idx'</span>)/<span class="number">1024</span> || <span class="string">'K'</span> <span class="keyword">AS</span> size;</span><br><span class="line">size</span><br><span class="line"><span class="comment">------</span></span><br><span class="line"><span class="number">1240</span>K</span><br><span class="line">(<span class="number">1</span> <span class="keyword">row</span>)</span><br><span class="line"><span class="number">5.</span> 重建索引。</span><br><span class="line">postgres=# <span class="keyword">REINDEX</span> <span class="keyword">INDEX</span> testtable_idx;</span><br><span class="line"><span class="keyword">REINDEX</span></span><br><span class="line"><span class="number">6.</span> 查看重建后的索引实际占用的空间，从结果中可以看出索引的尺寸已经减少。</span><br><span class="line">postgres=# <span class="keyword">SELECT</span> pg_relation_size(<span class="string">'testtable_idx'</span>)/<span class="number">1024</span> || <span class="string">'K'</span> <span class="keyword">AS</span> size;</span><br><span class="line">size</span><br><span class="line"><span class="comment">------</span></span><br><span class="line"><span class="number">368</span>K</span><br><span class="line">(<span class="number">1</span> <span class="keyword">row</span>)</span><br><span class="line"><span class="number">7.</span> 最后一点需要记住的是，在索引重建后一定要分析数据表。</span><br><span class="line">postgres=# <span class="keyword">ANALYZE</span> testtable;</span><br><span class="line">ANALYZ</span><br></pre></td></tr></table></figure>

<p>Backup</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数据库备份*/</span> </span><br><span class="line">pg_dump testdb &gt; /var/lib/pgsql/<span class="number">12</span>/backups/<span class="number">1.</span><span class="keyword">sql</span></span><br><span class="line"></span><br><span class="line"> psql testdb &lt; /var/lib/pgsql/<span class="number">12</span>/backups/<span class="number">1.</span><span class="keyword">sql</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*增量备份*/</span></span><br><span class="line"><span class="number">1</span>、配置数据库、vim postgresql.conf</span><br><span class="line"></span><br><span class="line">wal_level = <span class="keyword">replica</span></span><br><span class="line">archive_mode = <span class="keyword">on</span></span><br><span class="line">archive_command = <span class="string">'cp %p /home/test/archive/%f &amp;&amp; echo %f &gt;&gt; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span><span class="type">DATE</span>=`<span class="type">date</span> +%Y%m%d`; DIR="/ssd/pg957/arch/$DATE"; </span><br><span class="line"></span><br><span class="line"><span class="string">'DATE=`date +%Y%m%d`; DIR="/var/lib/pgsql/12/backups/arch/$DATE"; (test -d $DIR</span></span><br><span class="line"><span class="string">|| mkdir -p $DIR) &amp;&amp; cp %p $DIR/%f'</span></span><br><span class="line"></span><br><span class="line">cp %p /var/lib/pgsql/<span class="number">12</span>/backups/arch/%f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp %p /archive/%f</span><br><span class="line"></span><br><span class="line">/home/test/archive/archive.list<span class="string">' </span></span><br><span class="line"><span class="string">wal_keep_segments=1024</span></span><br></pre></td></tr></table></figure>

<p>Replication</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**主备机都执行/</span></span><br><span class="line"><span class="comment">yum install -y https://yum.postgresql.org/12/redhat/rhel-7.4-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y</span></span><br><span class="line"><span class="comment">yum install -y postgresql12-server</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">数据库初始化</span></span><br><span class="line"><span class="comment">/usr/pgsql-12/bin/postgresql-12-setup initdb</span></span><br><span class="line"><span class="comment">启动数据库</span></span><br><span class="line"><span class="comment">systemctl start postgresql-12</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">/*在主备机上创建专用用于replication账号，账号名:replicator */</span></span><br><span class="line"># <span class="keyword">as</span> postgres</span><br><span class="line">$ psql -c "ALTER SYSTEM SET listen_addresses TO '*'";</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span></span><br><span class="line"></span><br><span class="line"># <span class="keyword">as</span> root, <span class="keyword">restart</span> the service</span><br><span class="line">$ systemctl <span class="keyword">restart</span> postgresql<span class="number">-12</span></span><br><span class="line"></span><br><span class="line">postgres=# <span class="keyword">CREATE</span> <span class="keyword">USER</span> replicator <span class="keyword">WITH</span> <span class="keyword">REPLICATION</span> <span class="keyword">ENCRYPTED</span> <span class="keyword">PASSWORD</span> <span class="string">'secret'</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROLE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*把所有机器的访问信息加入pg_hba.conf文件*/</span></span><br><span class="line"> $ echo "host replication replicator 192.168.164.205/32 md5" &gt;&gt; $PGDATA/pg_hba.conf</span><br><span class="line"></span><br><span class="line"> $ echo "host replication replicator 192.168.164.204/32 md5" &gt;&gt; $PGDATA/pg_hba.conf</span><br><span class="line"></span><br><span class="line">## <span class="keyword">Get</span> the changes <span class="keyword">into</span> effect through a reload.</span><br><span class="line"></span><br><span class="line">$ psql -c "select pg_reload_conf()"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在备机上进行backup*/</span></span><br><span class="line">$ pg_basebackup -h 192.168.164.205 -U replicator -p 5432 -D $PGDATA -Fp -Xs -P -R</span><br><span class="line">Password:</span><br><span class="line"><span class="number">25314</span>/<span class="number">25314</span> kB (<span class="number">100</span>%), <span class="number">1</span>/<span class="number">1</span> <span class="keyword">tablespace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在备机上创建standby.sinanl文件*/</span></span><br><span class="line"></span><br><span class="line">$ touch $PGDATA/standby.signal</span><br><span class="line"></span><br><span class="line">$ ls -l $PGDATA</span><br><span class="line">total <span class="number">60</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 224 Oct 8 16:41 backup_label</span></span><br><span class="line">drwx<span class="comment">------. 5 postgres postgres 41 Oct 8 16:41 base</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 30 Oct 8 16:41 current_logfiles</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 4096 Oct 8 16:41 global</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 32 Oct 8 16:41 log</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_commit_ts</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_dynshmem</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 4581 Oct 8 16:41 pg_hba.conf</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 1636 Oct 8 16:41 pg_ident.conf</span></span><br><span class="line">drwx<span class="comment">------. 4 postgres postgres 68 Oct 8 16:41 pg_logical</span></span><br><span class="line">drwx<span class="comment">------. 4 postgres postgres 36 Oct 8 16:41 pg_multixact</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_notify</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_replslot</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_serial</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_snapshots</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_stat</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_stat_tmp</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_subtrans</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_tblspc</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 6 Oct 8 16:41 pg_twophase</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 3 Oct 8 16:41 PG_VERSION</span></span><br><span class="line">drwx<span class="comment">------. 3 postgres postgres 60 Oct 8 16:41 pg_wal</span></span><br><span class="line">drwx<span class="comment">------. 2 postgres postgres 18 Oct 8 16:41 pg_xact</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 288 Oct 8 16:41 postgresql.auto.conf</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 26638 Oct 8 16:41 postgresql.conf</span></span><br><span class="line">-rw<span class="comment">-------. 1 postgres postgres 0 Oct 8 16:41 standby.signal</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在所有机器上的postgresql.auto.conf文件加入相互replication信息，信息如下：</span></span><br><span class="line"><span class="comment">primary_conninfo = 'user=replicator password=secret host=192.168.164.204 port=5432 sslmode=prefer sslcompression=0 gssencmode=prefer krbsrvname=postgres target_session_attrs=any'</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">psql -c "ALTER SYSTEM SET primary_conninfo TO 'user=replicator password=secret host=192.168.231.130 port=5432 sslmode=prefer sslcompression=0 gssencmode=prefer krbsrvname=postgres target_session_attrs=any'";</span><br><span class="line">psql -c "ALTER SYSTEM SET primary_conninfo TO 'user=replicator password=secret host=192.168.231.129 port=5432 sslmode=prefer sslcompression=0 gssencmode=prefer krbsrvname=postgres target_session_attrs=any'";</span><br><span class="line"></span><br><span class="line">$ cat $PGDATA/postgresql.auto.conf</span><br><span class="line"># <span class="keyword">Do</span> <span class="keyword">not</span> edit this file manually!</span><br><span class="line"># It will be overwritten <span class="keyword">by</span> the <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> command.</span><br><span class="line">listen_addresses = <span class="string">'*'</span></span><br><span class="line">primary_conninfo = <span class="string">'user=replicator password=secret host=192.168.164.204 port=5432 sslmode=prefer sslcompression=0 gssencmode=prefer krbsrvname=postgres target_session_attrs=any'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在备机上备份data 目录到data_orig*/</span></span><br><span class="line"></span><br><span class="line">cp -R /var/lib/pgsql/<span class="number">12</span>/data /var/lib/pgsql/<span class="number">12</span>/data_orig</span><br><span class="line"></span><br><span class="line">并把备机上的data 目录到的文件清空</span><br><span class="line">在data 目录下执行 rm -rf *</span><br><span class="line"></span><br><span class="line"><span class="comment">/*在备机上对主机进行备份，并把目录copy到备机的data 目录下*/</span></span><br><span class="line">pg_basebackup -h <span class="number">192.168</span><span class="number">.164</span><span class="number">.204</span> -D /var/lib/pgsql/<span class="number">12</span>/data -U replicator -P -v  -R -X stream -C -S pgnode2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat /var/lib/pgsql/<span class="number">12</span>/data/postgresql.auto.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">/*启动备机服务*/</span></span><br><span class="line">systemctl <span class="keyword">start</span> postgresql<span class="number">-12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在主机上运行以下查询查看replication的状态*/</span></span><br><span class="line"></span><br><span class="line">$ psql -c "\x" -c "SELECT * FROM pg_stat_wal_receiver;"</span><br><span class="line"></span><br><span class="line">$ psql -c "\x" -c "SELECT * FROM pg_stat_replication;"</span><br><span class="line"></span><br><span class="line"><span class="comment">/*在主机上运行以下命令，把同步模式改成同步提交*/</span></span><br><span class="line"></span><br><span class="line">psql -c "ALTER SYSTEM SET synchronous_standby_names TO  '*';"</span><br><span class="line"></span><br><span class="line"><span class="comment">/*replication 搭建文档，可以进行测试*/</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、切换举例：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>）主库操作：关闭主库，模拟主库故障：</span><br><span class="line"></span><br><span class="line">systemctl stop postgresql<span class="number">-12</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>）备库操作：激活备库：</span><br><span class="line"></span><br><span class="line">su postgres</span><br><span class="line"></span><br><span class="line">psql</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> pg_promote(<span class="keyword">true</span>,<span class="number">60</span>);</span><br></pre></td></tr></table></figure>

<p>md5</p>
<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">extension</span> pg_stat_statements</span><br><span class="line"></span><br><span class="line"> <span class="keyword">create</span> <span class="keyword">table</span> test_user</span><br><span class="line"> (id <span class="type">serial</span>,username <span class="type">varchar</span>(<span class="number">32</span>),<span class="keyword">password</span> <span class="type">text</span>)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> idx_test_user_username </span><br><span class="line">  <span class="keyword">on</span> test_user <span class="keyword">using</span> btree (username)</span><br><span class="line">  <span class="comment">/*使用MD5加密*/</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> test_user(username,<span class="keyword">password</span>) </span><br><span class="line">  <span class="keyword">values</span>(<span class="string">'user1'</span>,md5(<span class="string">'123456'</span>));</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> test_user(username,<span class="keyword">password</span>) </span><br><span class="line">  <span class="keyword">values</span>(<span class="string">'user2'</span>,md5(<span class="string">'123456'</span>));</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">from</span> test_user;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/01/25/Postgres-Notes/" data-id="ckkcuetqb001evwwj0g4331ey" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/08/20/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Useful/">Useful</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/" rel="tag">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cypress/" rel="tag">Cypress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Springboot/" rel="tag">Springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yarn/" rel="tag">Yarn</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/tags/Cypress/" style="font-size: 10px;">Cypress</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/tags/Springboot/" style="font-size: 20px;">Springboot</a> <a href="/tags/Yarn/" style="font-size: 10px;">Yarn</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/25/Postgres-Notes/">Postgres Notes</a>
          </li>
        
          <li>
            <a href="/2020/08/20/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/05/26/cypress-testing/">cypress_testing</a>
          </li>
        
          <li>
            <a href="/2020/04/11/Ajax-cache-clearing-IE/">Ajax cache clearing(IE)</a>
          </li>
        
          <li>
            <a href="/2020/03/23/GitHub-SSH/">GitHub_SSH</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Barack Chen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>